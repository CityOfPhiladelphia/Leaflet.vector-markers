{"version":3,"file":"leaflet-vector-icon.js","sources":["../src/index.js"],"sourcesContent":["import { Util, Point, Icon } from 'leaflet';\n\nconst iconOptions = {\n  iconSize: [30, 50],\n  iconAnchor: [15, 50],\n  popupAnchor: [2, -40],\n  shadowAnchor: [39, 45],\n  shadowSize: [54, 51],\n  className: 'vector-marker',\n  prefix: 'fa',\n  spinClass: 'fa-spin',\n  extraIconClasses: '',\n  extraDivClasses: '',\n  icon: 'home',\n  markerColor: 'blue',\n  iconColor: 'white',\n  viewBox: '0 0 32 52',\n};\n\nconst defaultPin = 'M16,1 C7.7146,1 1,7.65636364 1,15.8648485 C1,24.0760606 16,51 16,51 C16,51 31,24.0760606 31,15.8648485 C31,7.65636364 24.2815,1 16,1 L16,1 Z';\n\nexport default class VectorIcon extends Icon {\n  constructor(options) {\n    super(options);\n\n    Util.setOptions(this, iconOptions);\n    Util.setOptions(this, options);\n  }\n\n  createIcon(oldIcon) {\n    const div = (oldIcon && oldIcon.tagName === 'DIV' ? oldIcon : document.createElement('div'));\n    const { options } = this;\n    const pinPath = options.mapPin || defaultPin;\n\n    div.innerHTML = `<svg width=\"${options.iconSize[0]}px\" height=\"${options.iconSize[1]}px\" viewBox=\"${options.viewBox}\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><path d=\"${pinPath}\" fill=\"${options.markerColor}\"></path></svg>`;\n\n    if (options.icon) {\n      div.appendChild(this._createInner());\n    }\n\n    options.className += options.className.length > 0 ? ' ' + options.extraDivClasses : options.extraDivClasses;\n    this._setIconStyles(div, 'icon');\n    this._setIconStyles(div, `icon-${options.markerColor}`);\n\n    return div;\n  }\n\n  createShadow() {\n    const div = document.createElement('div');\n    this._setIconStyles(div, 'shadow');\n\n    return div;\n  }\n\n  _createInner() {\n    const i = document.createElement('i');\n    const options = this.options;\n\n    i.classList.add(options.prefix);\n\n    if (options.extraClasses) {\n      i.classList.add(options.extraClasses);\n    }\n\n    if (options.prefix) {\n      i.classList.add(options.prefix + '-' + options.icon);\n    } else {\n      i.classList.add(options.icon);\n    }\n\n    if (options.spin && typeof options.spinClass === 'string') {\n      i.classList.add(options.spinClass);\n    }\n\n    if (options.iconColor) {\n      if (options.iconColor === 'white' || options.iconColor === 'black') {\n        i.classList.add('icon-' + options.iconColor);\n      } else {\n        i.style.color = options.iconColor;\n      }\n    }\n\n    if (options.iconSize) {\n      i.style.width = options.iconSize[0] + 'px';\n    }\n\n    return i;\n  }\n\n  _setIconStyles(img, name) {\n    const options = this.options;\n    const size = new Point(options[(name === 'shadow' ? 'shadowSize' : 'iconSize')]);\n    let anchor = void 0;\n\n    if (name === 'shadow') {\n      anchor = new Point(options.shadowAnchor || options.iconAnchor);\n    } else {\n      anchor = new Point(options.iconAnchor);\n    }\n\n    if (!anchor && size) {\n      anchor = size.divideBy(2, true);\n    }\n\n    img.className = `vector-marker-${name} ${options.className}`;\n\n    if (anchor) {\n      img.style.marginLeft = (-anchor.x) + 'px';\n      img.style.marginTop = (-anchor.y) + 'px';\n    }\n\n    if (size) {\n      img.style.width = size.x + 'px';\n      img.style.height = size.y + 'px';\n    }\n  }\n};\n"],"names":["const","super","Util","Point","let","Icon"],"mappings":"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"}