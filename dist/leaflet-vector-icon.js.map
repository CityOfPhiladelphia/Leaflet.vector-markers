{"version":3,"file":"leaflet-vector-icon.js","sources":["../src/index.js"],"sourcesContent":["// console.log('index.js vector icon')\r\n\r\nimport { Util, Point, Icon } from 'leaflet';\r\n\r\nconst iconOptions = {\r\n  iconSize: [100, 100],\r\n  iconAnchor: [50, 50],\r\n  popupAnchor: [2, -40],\r\n  shadowAnchor: [39, 45],\r\n  shadowSize: [54, 51],\r\n  className: 'vector-marker',\r\n  prefix: 'fa',\r\n  spinClass: 'fa-spin',\r\n  extraIconClasses: '',\r\n  extraDivClasses: '',\r\n  icon: 'home',\r\n  markerColor: 'red',\r\n  iconColor: 'white',\r\n  viewBox: '0 0 32 52',\r\n};\r\n\r\nexport default class VectorIcon extends Icon {\r\n  constructor(options) {\r\n    // console.log('constructor')\r\n    if (options.icon.size) {\r\n      // console.log('options.icon.size:', options.icon.size);\r\n      const size = options.icon.size;\r\n      // options.iconSize = [10, 10];\r\n      // options.iconAnchor = [5, 5];\r\n      options.iconSize = [size*2, size*2];\r\n      options.iconAnchor = [size, size];\r\n      // options.shadowSize = [size, size];\r\n      // options.shadowAnchor = [size-size*0.2, size-size*0.1];\r\n    } else {\r\n      options.icon.size = 50;\r\n    }\r\n    // console.log('iconOptions:', iconOptions, 'options:', options);\r\n    super(options);\r\n    Util.setOptions(this, iconOptions);\r\n    Util.setOptions(this, options);\r\n  }\r\n\r\n  createIcon(oldIcon) {\r\n    const div = (oldIcon && oldIcon.tagName === 'DIV' ? oldIcon : document.createElement('div'));\r\n    const { options } = this;\r\n    const icon = options.icon;\r\n    div.innerHTML = `<i class=\"` + icon.prefix + ` fa-` + icon.icon + `\" style=\"color:` + options.markerColor + `; width: ` + icon.size + `px; height: `+ icon.size + `px\"></i>`;\r\n\r\n\r\n    options.className += options.className.length > 0 ? ' ' + options.extraDivClasses : options.extraDivClasses;\r\n    this._setIconStyles(div, 'icon');\r\n    this._setIconStyles(div, `icon-${options.markerColor}`);\r\n\r\n    return div;\r\n  }\r\n\r\n  createShadow() {\r\n    const { options } = this;\r\n    // console.log('createShadow is running, options:', options);\r\n    if (options.icon.shadow == true) {\r\n      // console.log('createShadow if is running');\r\n      const div = document.createElement('div');\r\n      this._setIconStyles(div, 'shadow');\r\n      // const size = options.icon.size;\r\n      // div.style.boxshadow = size + 'px -10px 10px rgba(0,0,0,0.4)'\r\n      return div;\r\n    }\r\n    // else {\r\n    //   return;\r\n    // }\r\n  }\r\n\r\n    // document.getElementsByClassName(\"vector-marker-shadow\").style[\"boxShadow\"] = \"0 0 5px #999999\";\r\n\r\n  // _createInner() {\r\n  //   const i = document.createElement('i');\r\n  //   const options = this.options;\r\n  //\r\n  //   i.classList.add(options.prefix);\r\n  //\r\n  //   if (options.extraClasses) {\r\n  //     i.classList.add(options.extraClasses);\r\n  //   }\r\n  //\r\n  //   if (options.prefix) {\r\n  //     i.classList.add(options.prefix + '-' + options.icon);\r\n  //   } else {\r\n  //     i.classList.add(options.icon);\r\n  //   }\r\n  //\r\n  //   if (options.spin && typeof options.spinClass === 'string') {\r\n  //     i.classList.add(options.spinClass);\r\n  //   }\r\n  //\r\n  //   if (options.iconColor) {\r\n  //     if (options.iconColor === 'white' || options.iconColor === 'black') {\r\n  //       i.classList.add('icon-' + options.iconColor);\r\n  //     } else {\r\n  //       i.style.color = options.iconColor;\r\n  //     }\r\n  //   }\r\n  //\r\n  //   if (options.iconSize) {\r\n  //     i.style.width = options.iconSize[0] + 'px';\r\n  //   }\r\n  //\r\n  //   return i;\r\n  // }\r\n\r\n  _setIconStyles(img, name) {\r\n    const { options } = this;\r\n    let size;\r\n    let anchor;\r\n\r\n    // get size and anchor coords\r\n    if (name === 'shadow') {\r\n      size = options.shadowSize;\r\n      anchor = options.shadowAnchor || options.iconAnchor;\r\n    } else {\r\n      size = options.iconSize;\r\n      anchor = options.iconAnchor;\r\n    }\r\n\r\n\r\n    // if anchor wasn't specified, default to one-half the size\r\n    if (!anchor && size) {\r\n      anchor = size.map(n => n / 2);\r\n    }\r\n\r\n    img.className = `vector-marker-${name} ${options.className}`;\r\n\r\n    if (anchor) {\r\n      img.style.marginLeft = `${-anchor[0]}px`;\r\n      img.style.marginTop = `${-anchor[1]}px`;\r\n    }\r\n\r\n    if (size) {\r\n      img.style.width = `${size[0]}px`;\r\n      img.style.height = `${size[1]}px`;\r\n    }\r\n\r\n    // this.testFunc()\r\n  }\r\n\r\n  // testFunc() {\r\n  //   console.log('testFunc is running');\r\n  //   document.getElementsByClassName(\"vector-marker-shadow\").style[\"boxShadow\"] = \"0 0 5px #999999\";\r\n  // }\r\n};\r\n"],"names":["const","iconOptions","iconSize","iconAnchor","popupAnchor","shadowAnchor","shadowSize","className","prefix","spinClass","extraIconClasses","extraDivClasses","icon","markerColor","iconColor","viewBox","options","size","super","Util","setOptions","this","createIcon","oldIcon","div","tagName","document","createElement","innerHTML","length","_setIconStyles","createShadow","shadow","img","name","anchor","map","n","style","marginLeft","marginTop","width","height","Icon"],"mappings":"+NAIAA,IAAMC,GACJC,UAAW,IAAK,KAChBC,YAAa,GAAI,IACjBC,aAAc,GAAI,IAClBC,cAAe,GAAI,IACnBC,YAAa,GAAI,IACjBC,UAAW,gBACXC,OAAQ,KACRC,UAAW,UACXC,iBAAkB,GAClBC,gBAAiB,GACjBC,KAAM,OACNC,YAAa,MACbC,UAAW,QACXC,QAAS,gCAIT,WAAYC,GAEV,GAAIA,EAAQJ,KAAKK,KAAM,CAErBjB,IAAMiB,EAAOD,EAAQJ,KAAKK,KAG1BD,EAAQd,UAAiB,EAALe,EAAa,EAALA,GAC5BD,EAAQb,YAAcc,EAAMA,QAI5BD,EAAQJ,KAAKK,KAAO,GAGtBC,YAAMF,GACNG,OAAKC,WAAWC,KAAMpB,GACtBkB,OAAKC,WAAWC,KAAML,6GAGxBM,oBAAWC,GACTvB,IAAMwB,EAAOD,GAA+B,QAApBA,EAAQE,QAAoBF,EAAUG,SAASC,cAAc,SACjEN,aACdT,EAAOI,EAAQJ,KAQrB,OAPAY,EAAII,UAAY,aAAehB,EAAKJ,OAAS,OAASI,EAAKA,KAAO,kBAAoBI,EAAQH,YAAc,YAAcD,EAAKK,KAAO,eAAgBL,EAAKK,KAAO,WAGlKD,EAAQT,WAAaS,EAAQT,UAAUsB,OAAS,EAAI,IAAMb,EAAQL,gBAAkBK,EAAQL,gBAC5FU,KAAKS,eAAeN,EAAK,QACzBH,KAAKS,eAAeN,UAAaR,EAAmB,aAE7CQ,eAGTO,wBAGE,GAA2B,GAFPV,aAERT,KAAKoB,OAAgB,CAE/BhC,IAAMwB,EAAME,SAASC,cAAc,OAInC,OAHAN,KAAKS,eAAeN,EAAK,UAGlBA,gBA4CXM,wBAAeG,EAAKC,GAClB,IACIjB,EACAkB,IAFgBd,aAKP,WAATa,GACFjB,EAAOD,EAAQV,WACf6B,EAASnB,EAAQX,cAAgBW,EAAQb,aAEzCc,EAAOD,EAAQd,SACfiC,EAASnB,EAAQb,aAKdgC,GAAUlB,IACbkB,EAASlB,EAAKmB,aAAIC,UAAKA,EAAI,KAG7BJ,EAAI1B,UAAY,iBAAiB2B,MAAQlB,EAAiB,UAEtDmB,IACFF,EAAIK,MAAMC,YAAiBJ,EAAO,QAClCF,EAAIK,MAAME,WAAgBL,EAAO,SAG/BlB,IACFgB,EAAIK,MAAMG,MAAWxB,EAAK,QAC1BgB,EAAIK,MAAMI,OAAYzB,EAAK,aArHO0B"}